# 设置存储空间清单

您可以使用对象存储OSS的清单功能获取存储空间（Bucket）中指定文件（Object）的数量、大小、存储类型、加密状态等信息。相对于GetBucket \(ListObjects\)接口，在海量Object的列举场景中，建议您优先使用清单功能。

使用RAM用户配置清单任务时，已授予RAM用户PutBucketInventory、GetBucketInventory、ListBucketInventory、DeleteBucketInventory、CreateRole、GetRole权限。授权操作，请参见[创建自定义策略](/cn.zh-CN/权限策略管理/自定义策略/创建自定义策略.md)和[为RAM用户授权](/cn.zh-CN/用户管理/为RAM用户授权.md)。

使用清单功能时，请注意以下事项：

-   通过控制台最多可配置10条清单规则。
-   使用Bucket清单功能会产生一定的费用，公测期间仅收取API请求费用和清单文件存储费用，暂不收取功能使用费用。
-   在您删除清单规则前，OSS会按照清单规则一直生成清单文件。为避免清单文件占用您过多的存储空间，请及时清理不再需要的清单文件。

更多信息，请参见[存储空间清单](/cn.zh-CN/开发指南/存储空间（Bucket）/存储空间清单.md)。

## 操作步骤

1.  登录[OSS管理控制台](https://oss.console.aliyun.com/)。

2.  单击**Bucket列表**，之后单击目标Bucket名称。

3.  选择**基础设置** \> **Bucket清单**，之后单击**设置**。

4.  单击**创建清单**，在设置清单报告规则对话框设置如下参数：

    |参数|是否必选|说明|
    |--|----|--|
    |**状态**|是|设置清单任务的状态。可以选择**启动**和**禁用**。|
    |**规则名称**|是|设置清单任务的名称。只能包含小写字母、数字、短划线（-），且不能以短划线（-）开头或结尾。|
    |**目标Bucket**|是|选择存储清单文件的目标Bucket。配置清单的源Bucket与存放清单文件的目标Bucket可以相同也可以不同，但是必须属于同一账号下的相同地域。 |
    |**清单报告目录**|否|设置清单报告存储的目录。置空时，清单报告存储在Bucket根目录。|
    |**清单报告导出周期**|是|设置清单报告的生成周期。可选择**每周**或**每天**。建议您根据源Bucket内的文件数量配置清单任务：

    -   文件数量小于10亿，可以以天为单位生成清单文件。
    -   文件数量为小于100亿，可以以周为单位生成清单文件。
    -   文件数量大于100亿，建议以周为单位，并针对不同的文件前缀设置不同的清单任务，保证每个清单任务涉及的文件不超过100亿个。 |
    |**清单报告加密选项**|否|是否加密清单文件。     -   **无**：不加密。
    -   **AES256**：使用AES256加密算法加密清单文件。
    -   **KMS**：使用KMS密钥加密清单文件。

您可以选择使用OSS托管的KMS密钥或在KMS平台创建一个与目标Bucket相同地域的KMS密钥。KMS密钥配置步骤，请参见[创建密钥](/cn.zh-CN/快速入门/管理和使用密钥/创建密钥.md)。

**说明：** 使用KMS密钥功能时会产生少量的KMS密钥API调用费用，费用详情请参考[KMS计费标准](/cn.zh-CN/产品定价/计费说明.md)。 |
    |**对象版本**|是|选择清单扫描的文件版本。 若Bucket已开启版本控制，可选择导出目标文件的**当前版本**或**所有版本**。更多信息，请参见[版本控制介绍](/cn.zh-CN/开发指南/数据安全/版本控制/版本控制介绍.md)。

若Bucket未开启版本控制，默认导出所有文件。 |
    |**按前缀匹配**|否|设置目标文件前缀，清单规则仅扫描指定前缀的文件；置空则扫描整个Bucket内的文件。 **说明：** 若设置了前缀，但该前缀没有匹配到任何Object，则不会生成清单文件。 |
    |**清单内容可选信息**|是|选择您希望导出的文件信息，包括**Object大小**、**存储类型**、**最后更新时间**、**ETag**、**分片上传状态**、**加密状态**。|

5.  选中**我知晓并同意授予阿里云OSS服务访问Bucket资源的权限**后，单击**确定**。

    清单文件的内容介绍，请参见[功能说明](/cn.zh-CN/开发指南/存储空间（Bucket）/存储空间清单.md)。


