# 教程示例：使用自定义域名设置静态网站托管

您可以通过存储空间（Bucket）托管静态网站，并让访问者通过Bucket绑定的自定义域名（例如example.com）访问您的网站。无论您是想在OSS上托管已有静态网站还是从零开始建站，都可以从此教程中获得帮助。

## 步骤1：注册域名

搭建静态网站前，您需要为网站准备一个域名。建议您使用阿里云域名服务快速注册一个属于您的域名。详细步骤，请参见[注册通用域名](/cn.zh-CN/域名注册/注册通用域名.md)。

本示例使用`example.com`作为测试域名。

**说明：** 若您注册的域名需绑定在中国内地的Bucket上，您还需在中国工信部备案域名。详细步骤，请参见[备案](https://beian.aliyun.com/order/selfBaIndex.htm)。

## 步骤2：创建Bucket

您需要创建一个公共读的Bucket，用以设置静态网站托管及存放网站数据。

1.  登录[OSS管理控制台](https://oss.console.aliyun.com/)。

2.  单击**Bucket列表**，然后单击**创建Bucket**。

3.  在创建Bucket面板配置Bucket参数，其中：

    |参数|说明|
    |--|--|
    |**Bucket名称**|设置Bucket名称。本示例设置为**examplebucket**。|
    |**地域**|选择Bucket所在地域。本示例选择**华东1（杭州）**。|
    |**存储类型**|选择**标准存储**。|
    |**读写权限**|选择**公共读**。|

    其他参数保持默认配置。更多信息，请参见[创建存储空间](/cn.zh-CN/控制台用户指南/存储空间管理/创建存储空间.md)。


## 步骤3：创建网页文件并上传

您需要创建静态网站首页和404错误页面的网页文件，并上传至目标Bucket。

1.  在本地创建两个HTML格式的文件。

    -   默认首页

        本示例使用以下内容生成静态网站的首页文件index.html。实际环境中，请根据您的需求生成首页文件内容。

        ```
        <html>
           <head>
               <title>Hello OSS!</title>
               <meta charset="utf-8">
           </head>
           <body>
               <p>开始阿里云OSS托管</p>
               <p>这是索引页面</p>
           </body>
         </html>
        ```

    -   默认404页

        本示例使用以下内容生成静态网站的404错误页文件error.html。实际环境中，请根据您的需求生成404错误页文件的内容。

        ```
        <html>
        <head>
           <title>Hello OSS!</title>
           <meta charset="utf-8">
        </head>
        <body>
           <p>这是404错误页面</p>
        </body>
        </html>
        ```

2.  将网页文件上传至目标Bucket。

    1.  登录[OSS管理控制台](https://oss.console.aliyun.com/)。

    2.  单击**Bucket列表**，然后单击目标Bucket。

    3.  单击**文件管理**，然后单击**上传文件**。

    4.  在上传文件面板的**上传文件**区域，单击**直接上传**并选中刚刚创建的两个网页文件。其他参数均保持默认配置。


## 步骤4：配置静态网站托管

1.  单击**基础设置** \> **静态页面**。

2.  单击**设置**，将index.html设置为**默认首页**；将error.html设置为**默认404页**。

    **说明：** 若您希望访问子目录时可以跳转到子目录下index.html文件，您可以选择开通**子目录首页**。详情请参见[设置静态网站托管](/cn.zh-CN/控制台用户指南/存储空间管理/基础设置/设置静态网站托管.md)。

3.  单击**保存**。


## 步骤5：绑定自定义域名

现在，您已有了根域名`example.com`和名为examplebucket的Bucket，接下来您需要将域名绑定到Bucket，以便能够使用您的域名访问Bucket。

1.  在Bucket管理页面，单击**传输管理** \> **域名管理**。

2.  单击**绑定域名**。

3.  在**域名**文本框输入**example.com**，并打开**自动添加CNAME记录**开关。

4.  单击**确定**。


## 步骤5：（可选）使用阿里云CDN加快网站速度

您可以使用阿里云CDN改善网站性能。CDN可以让您的网站文件（如HTML、图像和视频）缓存至全球各地的数据中心。当访问者从您的网站请求文件时，CDN会自动将请求重定向到最近数据中心上的文件副本，提升访问者的下载速度。

1.  在Bucket管理页面，单击**传输管理** \> **域名管理**。

2.  单击目标域名右侧的**未配置**，跳转至CDN控制台。

3.  在添加域名页面配置以下参数：

    |参数|说明|
    |:-|:-|
    |**加速域名**|保持默认配置。|
    |**资源分组**|选择默认资源组。|
    |**业务类型**|不同的业务类型有不同的流量分配，按照您存储的内容及使用情况选择合适的业务类型。本示例选择**图片小文件**。|
    |**源站信息**|保持默认配置|
    |**端口**|选择CDN服务端口。本示例选择**80端口**。|
    |**加速区域**|选择CDN的加速区域。本示例选择**仅中国内地**。|

4.  单击**下一步**，然后单击**返回域名列表**。

5.  记录域名生成的CNAME值**example.com.w.kunlunsl.com**，然后修改绑定自定义域名时增加的CNAME记录。

    1.  进入[云解析DNS控制台](https://dns.console.aliyun.com/#/dns/domainList)。

    2.  在域名解析列表中，单击目标域名右侧的**解析设置**。

    3.  找到绑定自定义域名时自动添加的CNAME记录，单击**修改**。

    4.  将**记录值**修改为**example.com.w.kunlunsl.com**，其他参数保持原来配置。

    5.  单击**确认**。

6.  （可选）回到**域名管理**页签，打开目标域名右侧的**CDN缓存自动刷新**开关。

    如果您希望针对指定操作触发CDN缓存自动刷新，可以[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex)申请开通针对指定操作触发CDN缓存自动刷新的功能。开通后，您需要单击目标域名右侧**支持的操作**，然后选中指定操作类型。支持的操作类型，请参见[开启CDN缓存自动刷新](/cn.zh-CN/控制台用户指南/存储空间管理/传输管理/绑定CDN加速域名.md)。


## 步骤6：测试网站

在浏览器中访问以下URL以验证网站是否正常运行：

-   访问静态网站首页`http://example.com`，配置正确时显示如下页面：

    ![11](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3786519061/p206863.png)

-   访问Bucket中不存在的文件`http://example.com/example.txt`，配置正确时显示如下页面：

    ![404](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3786519061/p206865.png)


## 步骤7：清理资源

本教程中创建的资源仅为测试环境使用，建议您在测试完成后清理资源，以免产生不必要的费用。

-   CDN服务绑定的域名。操作步骤，请参见[停止CDN服务](/cn.zh-CN/快速入门/停止CDN服务.md)。
-   云解析服务添加的CNAME记录。操作步骤，请参见[删除记录](https://help.aliyun.com/document_detail/29726.html)
-   OSS中创建的Bucket及上传的文件。操作步骤，请参见[删除文件](/cn.zh-CN/控制台用户指南/文件管理/删除文件.md)和[删除存储空间](/cn.zh-CN/控制台用户指南/存储空间管理/基础设置/删除存储空间.md)。

