# 文件存储NAS

阿里云文件存储NAS（Apsara File Storage）是面向阿里云ECS实例、E-HPC和容器服务等计算节点的文件存储服务。它是一种可共享访问、弹性扩展、高可靠以及高性能的分布式文件系统，支持NFS和SMB协议。

[文件存储NAS](https://nasnext.console.aliyun.com)目前提供极速型、性能型、容量型、低频型四种规格：

|极速型|基于阿里云最新一代网络架构和全闪存储打造的高性能共享文件存储。最大容量256 TB，起步带宽150 MB/s，可扩展到1200 MB/s。稳定百微秒级时延。适合海量小文件、时延敏感的业务。|
|性能型|使用SSD作为存储介质，为应用工作负载提供高吞吐量与IOPS、低时延的存储性能。适用于高并发高吞吐，业务弹性扩展、对读时延有较高要求的文件共享存储服务。对于读写频繁、系统响应要求高的业务，有性能优势。|
|容量型|使用SATA HDD作为存储介质，以更低的成本提供高性能的存储空间。适用于高并发高吞吐，业务弹性扩展，成本敏感型的文件共享存储服务。对于读写访问不太频繁，时延响应要求不高的业务，有较好的成本优势。|
|低频型|对于不频繁访问的，长期存储的性能型或容量型数据，可以通过生命周期管理功能将其转移到低频存储空间，采用低频计费方式，从而进一步降低成本。详情请参见[生命周期管理功能介绍]()。|

## 适用场景

NAS适用于以下场景：

-   容器存储

    鉴于容器的可快速预置、容易携带，并可提供进程隔离的特点，容器非常适用于构建微服务。对于每次启动时都需要访问原始数据的容器，它们需要一个共享文件系统，使它们无论在哪个实例上运行，都可以连接到该文件系统。NAS可提供对文件数据的持久共享访问权限，非常适合容器存储。

-   内容管理和Web服务

    NAS可以用作一种持久性强、吞吐量高的文件系统，用于各种内容管理系统和Web服务应用程序，为网站、在线发行和存档等广泛的应用程序存储和提供信息。由于NAS遵循了预期的文件系统语义、文件命名惯例、Web开发人员习惯使用的权限，因此它能够轻松与Web应用程序集成，并且可广泛用于Web站点、在线发行和存档等应用程序。

-   企业应用程序

    NAS具有较高的可扩展性、弹性、可用性和持久性，因而可用作企业应用程序和以服务形式交付的应用程序的文件存储。NAS提供的标准文件系统界面和文件系统语义能够将企业应用程序轻松迁移到阿里云或构建新的应用程序。

-   媒体和娱乐工作流

    视频编辑、影音制作、广播处理、声音设计和渲染等媒体工作流通常依赖于共享存储来操作大型文件。强大的数据一致性模型加上高吞吐量和共享文件访问，可以缩短完成以上工作流所需的时间，并将多个本地文件存储库合并到面向所有用户的单个位置。

-   大数据分析

    NAS提供了大数据应用程序所需的规模和性能，具备计算节点高吞吐量、写和读一致性以及低延迟的文件操作能力。许多分析工作负载通过文件接口与数据进行交互，依赖于文件锁等文件语义，并要求能够写入文件的部分内容。NAS支持文件锁定的文件系统语义，并且能够弹性扩展容量和性能。


## 性能

单个文件系统的吞吐性能上限（峰值）与文件系统的当前使用容量线性相关，即存储量越大，吞吐性能上限（峰值）越高。支持上千个ECS通过POSIX接口并发访问，随机读写。

|规格|容量|时延|IOPS|
|--|--|--|----|
|极速型NAS|256 TB|百微秒级|10000~200000|
|性能型NAS|1 PB|毫秒级|最大30000（硬盘4k随机IO读写|
|容量型NAS|10 PB|10毫秒级|最大15000（硬盘4k随机IO读写）|

## 接口

NAS数据层的API，如NAS数据的读写操作，通过POSIX接口实现。您无需修改线下本机的应用程序代码即可直接上云，灵活方便。

NAS控制层的API支持HTTP或者HTTPS网络请求协议，允许GET和POST方法。如果您熟悉网络服务协议和一种以上编程语言，推荐您调用API管理您的文件存储NAS。您可以通过阿里云NAS SDK、阿里云CLI、阿里云API Explorer调用NAS控制层的API，对文件系统、挂载点、权限组、快照、标签等资源执行创建、删除、查询、修改等操作。详情请参见[API概览]()。如果您更习惯使用图形化的Web应用程序，可以使用[NAS管理控制台](https://nasnext.console.aliyun.com/overview)，实现NAS API支持的所有控制层的操作。

## 扩展性和弹性

传统的存储系统需要耗时又繁琐的规划、购置、分区、监控等操作，使用NAS则无需进行这些复杂的操作。NAS可随着您文件的添加和删除自动进行扩容或缩容，实现存储的按需分配，而不影响您的应用服务。

## 数据持久性和服务可用性

NAS的数据在后端进行多副本存储，每份数据都有多份拷贝在故障域隔离的不同设备上存放， 提供99.999999999%（11个9）的数据可靠性，能够有效降低数据安全风险。

## 安全性

-   权限组

    在NAS中，权限组是一个白名单机制，定义了访问文件存储的权限信息，包括授权IP地址、读写权限、用户权限等。您可以添加权限组规则，允许指定的IP地址或网段访问文件系统，并可以给不同的IP地址或网段授予不同级别的访问权限。

-   访问控制RAM

    您可以通过RAM来管理NAS用户身份并控制资源的访问权限。RAM是基于用户的访问控制。您可以在一个云账户（主账户）下创建并管理多个RAM用户，并给RAM用户分配不同的授权策略，从而实现不同RAM用户拥有不同的云资源访问权限。使用RAM还可以让您避免与其他用户共享云账号密钥（AccessKey），按需为用户分配最小权限，从而降低您的企业信息安全风险。详情请参见[基于RAM Policy的权限控制]()。

-   访问控制ACL

    您可以通过ACL管理文件和目录的访问权限。ACL是基于资源的访问控制。企业级用户通过共享文件系统在多个用户和群组之间共享文件时，权限的控制和管理成为了不可缺少的功能。ACL权限控制允许您针对不同目录或文件，给不同的用户和群组设置相应的权限，实现访问隔离。详情请参见[NAS NFS ACL]()和[NAS SMB ACL]()。

-   加密

    NAS使用行业标准AES-256加密算法进行静态数据加密，为您的文件系统提供落盘存储加密服务，并使用密钥管理服务（KMS）进行密钥管理。在将数据写入到文件系统之前，自动对其进行加密；在读取数据并将其提供给应用程序之前，自动对其进行解密。这些过程是NAS透明处理的，因此您不必修改您的应用程序。


## 费用模型

NAS的容量可按照您的业务需求自动配置，您无需事先进行存储分区。相应的，NAS的费用模型也是按量付费。如果文件增加，您也只需支付实际使用的存储空间的费用。如果文件被删除，则会停止相应的计费。您也可以使用包年包月的计费方式，预先购买存储包，之后使用资源时，扣除相应的额度。一般情况下，存储包的价格更优惠。

